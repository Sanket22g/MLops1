schema: '2.0'
stages:
  data_preprocessing:
    cmd: python src/pre_processing.py
    deps:
    - path: raw_data/test_data.csv
      hash: md5
      md5: 1c1b36b6e95fb85626d486802d2a3ed2
      size: 692864
    - path: raw_data/train_data.csv
      hash: md5
      md5: 37509df8c48cf3fd3c178b491d42e670
      size: 2788277
    - path: src/pre_processing.py
      hash: md5
      md5: ba1bddaed78a185fa472f6a444494cb8
      size: 4556
    outs:
    - path: cleaned_data/test_data_cleaned.csv
      hash: md5
      md5: 7f14bcda4d882979f2e2a37e9fd7914e
      size: 409674
    - path: cleaned_data/train_data_cleaned.csv
      hash: md5
      md5: 0ca54c0bb8e4539293fbce5bf1a94f0b
      size: 1646288
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: cleaned_data/test_data_cleaned.csv
      hash: md5
      md5: 7f14bcda4d882979f2e2a37e9fd7914e
      size: 409674
    - path: cleaned_data/train_data_cleaned.csv
      hash: md5
      md5: 0ca54c0bb8e4539293fbce5bf1a94f0b
      size: 1646288
    - path: params.yaml
      hash: md5
      md5: 3ab523d6f3ab36f05296a54ddad500f4
      size: 549
    - path: src/feature_engineering.py
      hash: md5
      md5: 24c9b109b39d77b6182a2a9fe18e98dc
      size: 5250
    params:
      params.yaml:
        feature_engineering:
          max_features: 1000
          text_column: text
          target_column: label
    outs:
    - path: vectorized_data/x_test_tfidf.csv
      hash: md5
      md5: 029a02ae08b9fe0b110e298bd6877708
      size: 26260912
    - path: vectorized_data/x_train_tfidf.csv
      hash: md5
      md5: 273cc7e39e29517bd43473f0638457d3
      size: 105051973
  data_injection:
    cmd: python src/data_injection.py
    deps:
    - path: params.yaml
      hash: md5
      md5: 3ab523d6f3ab36f05296a54ddad500f4
      size: 549
    - path: src/data_injection.py
      hash: md5
      md5: af3a373037c02b35542c9c62824a8557
      size: 3877
    params:
      params.yaml:
        data_injection:
          test_size: 0.2
          random_state: 43
          url: 
            https://raw.githubusercontent.com/Sanket22g/dataset/refs/heads/main/reddit_artist_posts_sentiment.csv
    outs:
    - path: raw_data/test_data.csv
      hash: md5
      md5: 1c1b36b6e95fb85626d486802d2a3ed2
      size: 692864
    - path: raw_data/train_data.csv
      hash: md5
      md5: 37509df8c48cf3fd3c178b491d42e670
      size: 2788277
  model_training:
    cmd: python src/model.py
    deps:
    - path: params.yaml
      hash: md5
      md5: 3ab523d6f3ab36f05296a54ddad500f4
      size: 549
    - path: src/model.py
      hash: md5
      md5: bcdadf40d44c7688d2245af7c682b39f
      size: 3787
    - path: vectorized_data/x_test_tfidf.csv
      hash: md5
      md5: 029a02ae08b9fe0b110e298bd6877708
      size: 26260912
    - path: vectorized_data/x_train_tfidf.csv
      hash: md5
      md5: 273cc7e39e29517bd43473f0638457d3
      size: 105051973
    params:
      params.yaml:
        model_training:
          n_estimators: 200
          max_depth: 15
          min_samples_split: 2
          min_samples_leaf: 1
          random_state: 43
    outs:
    - path: models/random_forest_model.joblib
      hash: md5
      md5: d497814324ded530093d7d9aa1738658
      size: 8069521
  model_evaluation:
    cmd: python src/model_eval.py
    deps:
    - path: models/random_forest_model.joblib
      hash: md5
      md5: d497814324ded530093d7d9aa1738658
      size: 8069521
    - path: params.yaml
      hash: md5
      md5: 3ab523d6f3ab36f05296a54ddad500f4
      size: 549
    - path: src/model_eval.py
      hash: md5
      md5: d8f9ca3c1b3d62fb7e89f0c8e06a77d4
      size: 5721
    - path: vectorized_data/x_test_tfidf.csv
      hash: md5
      md5: 029a02ae08b9fe0b110e298bd6877708
      size: 26260912
    params:
      params.yaml:
        model_evaluation:
          average: weighted
    outs:
    - path: metrics/evaluation_metrics.json
      hash: md5
      md5: 3855eda19dff54d25b4c9deafd3c1490
      size: 536
